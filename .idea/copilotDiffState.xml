<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/App.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/App.js" />
              <option name="originalContent" value="import React, { useState, useEffect } from 'react';&#10;import { View, ActivityIndicator, AppRegistry } from 'react-native';&#10;import { NavigationContainer } from '@react-navigation/native';&#10;import { createNativeStackNavigator } from '@react-navigation/native-stack';&#10;import { supabase } from './supabase'; // Ajuste o caminho conforme sua estrutura&#10;&#10;import AuthScreen from './src/screens/AuthScreen';&#10;import HomeScreen from './src/screens/HomeScreen'; // Nova tela Home&#10;import MainMarketplace from './src/screens/MainMarketplace'; // Tela que acabamos de criar&#10;import AddItemScreen from './src/screens/AddItemScreen'; // Tela de cadastro de item&#10;import EditItemScreen from './src/screens/EditItemScreen'; // Tela de edição de item&#10;import ItemDetailsScreen from './src/screens/ItemDetailsScreen'; // Tela de detalhes do item&#10;import RequestRentalScreen from './src/screens/RequestRentalScreen'; // Tela de solicitação de aluguel&#10;&#10;const Stack = createNativeStackNavigator();&#10;&#10;export default function App() {&#10;    const [session, setSession] = useState(null);&#10;    const [loading, setLoading] = useState(true);&#10;&#10;    useEffect(() =&gt; {&#10;        // Lógica para checar a sessão (mantida do seu código anterior)&#10;        supabase.auth.getSession().then(({ data: { session } }) =&gt; {&#10;            setSession(session);&#10;            setLoading(false);&#10;        });&#10;&#10;        const { data: authListener } = supabase.auth.onAuthStateChange(&#10;            (_event, session) =&gt; {&#10;                setSession(session);&#10;                setLoading(false);&#10;            }&#10;        );&#10;&#10;        return () =&gt; authListener.subscription.unsubscribe();&#10;    }, []);&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}&gt;&#10;                &lt;ActivityIndicator size=&quot;large&quot; /&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    // Se estiver logado, exibe o Stack Navigator com as telas do app&#10;    if (session &amp;&amp; session.user) {&#10;        return (&#10;            &lt;NavigationContainer&gt;&#10;                &lt;Stack.Navigator&gt;&#10;                    &lt;Stack.Screen name=&quot;HomeScreen&quot; options={{ headerShown: false }}&gt;&#10;                        {(props) =&gt; &lt;HomeScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;Home&quot; options={{ title: 'Marketplace' }}&gt;&#10;                        {(props) =&gt; &lt;MainMarketplace {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;AddItem&quot; options={{ title: 'Anunciar Item' }}&gt;&#10;                        {(props) =&gt; &lt;AddItemScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;EditItem&quot; options={{ title: 'Editar Item' }}&gt;&#10;                        {(props) =&gt; &lt;EditItemScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;ItemDetails&quot; options={{ title: 'Detalhes do Item' }}&gt;&#10;                        {(props) =&gt; &lt;ItemDetailsScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;RequestRental&quot; options={{ title: 'Solicitar Aluguel' }}&gt;&#10;                        {(props) =&gt; &lt;RequestRentalScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    {/* Você adicionará Profile, etc., aqui */}&#10;                &lt;/Stack.Navigator&gt;&#10;            &lt;/NavigationContainer&gt;&#10;        );&#10;    }&#10;&#10;    // Se não estiver logado, exibe apenas a tela de autenticação&#10;    return &lt;AuthScreen /&gt;;&#10;}&#10;&#10;// Registrar o componente para Expo&#10;AppRegistry.registerComponent('main', () =&gt; App);&#10;" />
              <option name="updatedContent" value="import React, { useState, useEffect } from 'react';&#10;import { View, ActivityIndicator, AppRegistry } from 'react-native';&#10;import { NavigationContainer } from '@react-navigation/native';&#10;import { createNativeStackNavigator } from '@react-navigation/native-stack';&#10;import { supabase } from './supabase'; // Ajuste o caminho conforme sua estrutura&#10;&#10;import AuthScreen from './src/screens/AuthScreen';&#10;import HomeScreen from './src/screens/HomeScreen'; // Nova tela Home&#10;import MainMarketplace from './src/screens/MainMarketplace'; // Tela que acabamos de criar&#10;import AddItemScreen from './src/screens/AddItemScreen'; // Tela de cadastro de item&#10;import EditItemScreen from './src/screens/EditItemScreen'; // Tela de edição de item&#10;import ItemDetailsScreen from './src/screens/ItemDetailsScreen'; // Tela de detalhes do item&#10;import RequestRentalScreen from './src/screens/RequestRentalScreen'; // Tela de solicitação de aluguel&#10;import ProfileScreen from './src/screens/ProfileScreen'; // Tela de perfil do usuário&#10;&#10;const Stack = createNativeStackNavigator();&#10;&#10;export default function App() {&#10;    const [session, setSession] = useState(null);&#10;    const [loading, setLoading] = useState(true);&#10;&#10;    useEffect(() =&gt; {&#10;        // Lógica para checar a sessão (mantida do seu código anterior)&#10;        supabase.auth.getSession().then(({ data: { session } }) =&gt; {&#10;            setSession(session);&#10;            setLoading(false);&#10;        });&#10;&#10;        const { data: authListener } = supabase.auth.onAuthStateChange(&#10;            (_event, session) =&gt; {&#10;                setSession(session);&#10;                setLoading(false);&#10;            }&#10;        );&#10;&#10;        return () =&gt; authListener.subscription.unsubscribe();&#10;    }, []);&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}&gt;&#10;                &lt;ActivityIndicator size=&quot;large&quot; /&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    // Se estiver logado, exibe o Stack Navigator com as telas do app&#10;    if (session &amp;&amp; session.user) {&#10;        return (&#10;            &lt;NavigationContainer&gt;&#10;                &lt;Stack.Navigator&#10;                    screenOptions={{&#10;                        headerShown: true,&#10;                        headerTitle: '',&#10;                        headerBackTitleVisible: false,&#10;                        headerTransparent: true,&#10;                        headerStyle: {&#10;                            backgroundColor: 'transparent',&#10;                        },&#10;                        headerTintColor: '#007bff',&#10;                        headerShadowVisible: false,&#10;                    }}&#10;                &gt;&#10;                    &lt;Stack.Screen name=&quot;HomeScreen&quot; options={{ headerShown: false }}&gt;&#10;                        {(props) =&gt; &lt;HomeScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;Home&quot; options={{ headerShown: false }}&gt;&#10;                        {(props) =&gt; &lt;MainMarketplace {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;AddItem&quot;&gt;&#10;                        {(props) =&gt; &lt;AddItemScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;EditItem&quot;&gt;&#10;                        {(props) =&gt; &lt;EditItemScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;ItemDetails&quot;&gt;&#10;                        {(props) =&gt; &lt;ItemDetailsScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;RequestRental&quot;&gt;&#10;                        {(props) =&gt; &lt;RequestRentalScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;&#10;                    &lt;Stack.Screen name=&quot;Profile&quot;&gt;&#10;                        {(props) =&gt; &lt;ProfileScreen {...props} session={session} /&gt;}&#10;                    &lt;/Stack.Screen&gt;&#10;                &lt;/Stack.Navigator&gt;&#10;            &lt;/NavigationContainer&gt;&#10;        );&#10;    }&#10;&#10;    // Se não estiver logado, exibe apenas a tela de autenticação&#10;    return &lt;AuthScreen /&gt;;&#10;}&#10;&#10;// Registrar o componente para Expo&#10;AppRegistry.registerComponent('main', () =&gt; App);" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/screens/MainMarketplace.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/screens/MainMarketplace.js" />
              <option name="originalContent" value="import React, { useState, useEffect } from 'react';&#10;import { StyleSheet, View, Text, FlatList, ActivityIndicator, Image, TouchableOpacity, TextInput, ScrollView, Platform, StatusBar } from 'react-native';&#10;import { SafeAreaView } from 'react-native-safe-area-context';&#10;import { supabase } from '../../supabase';&#10;&#10;const SUPABASE_URL = 'https://fvhnkwxvxnsatqmljnxu.supabase.co';&#10;&#10;// Mapeamento de ícones e cores por categoria&#10;const categoryConfig = {&#10;    'Eletrônicos': { icon: '', color: '#FF6B6B', gradient: ['#FF6B6B', '#EE5A6F'] },&#10;    'Esportes': { icon: '', color: '#FF9F43', gradient: ['#FF9F43', '#FF8C00'] },&#10;    'Veículos': { icon: '', color: '#48DBFB', gradient: ['#48DBFB', '#0FB9E0'] },&#10;    'Móveis': { icon: '️', color: '#FFC312', gradient: ['#FFC312', '#EEA500'] },&#10;    'Ferramentas': { icon: '', color: '#A29BFE', gradient: ['#A29BFE', '#8B7FEE'] },&#10;    'Festas': { icon: '', color: '#FF6348', gradient: ['#FF6348', '#E84118'] },&#10;    'Jardim': { icon: '', color: '#26DE81', gradient: ['#26DE81', '#20BF6B'] },&#10;    'Outros': { icon: '', color: '#95A5A6', gradient: ['#95A5A6', '#7F8C8D'] },&#10;};&#10;&#10;// Componente para renderizar cada item em formato de card moderno&#10;const ItemCard = ({ item, onDetailsPress }) =&gt; {&#10;    const imageUrl = `${SUPABASE_URL}/storage/v1/object/public/item_photos/${item.photo_url}`;&#10;    const categoryInfo = categoryConfig[item.category] || categoryConfig['Outros'];&#10;&#10;    return (&#10;        &lt;TouchableOpacity&#10;            style={styles.card}&#10;            onPress={() =&gt; onDetailsPress(item)}&#10;            activeOpacity={0.9}&#10;        &gt;&#10;            {/* Imagem do Item com Overlay */}&#10;            &lt;View style={styles.cardImageContainer}&gt;&#10;                {item.photo_url ? (&#10;                    &lt;Image&#10;                        source={{ uri: imageUrl }}&#10;                        style={styles.cardImage}&#10;                        resizeMode=&quot;cover&quot;&#10;                    /&gt;&#10;                ) : (&#10;                    &lt;View style={[styles.cardImagePlaceholder, { backgroundColor: categoryInfo.color + '20' }]}&gt;&#10;                        &lt;Text style={styles.placeholderIcon}&gt;{categoryInfo.icon}&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                )}&#10;&#10;                {/* Gradiente Overlay na parte inferior da imagem */}&#10;                &lt;View style={styles.imageOverlay} /&gt;&#10;&#10;                {/* Badge de Disponibilidade */}&#10;                {item.is_available ? (&#10;                    &lt;View style={styles.availableBadge}&gt;&#10;                        &lt;View style={styles.availableDot} /&gt;&#10;                        &lt;Text style={styles.availableBadgeText}&gt;Disponível&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                ) : (&#10;                    &lt;View style={styles.unavailableBadge}&gt;&#10;                        &lt;View style={styles.unavailableDot} /&gt;&#10;                        &lt;Text style={styles.unavailableBadgeText}&gt;Alugado&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                )}&#10;&#10;                {/* Ícone de Categoria */}&#10;                &lt;View style={[styles.categoryIconBadge, { backgroundColor: categoryInfo.color }]}&gt;&#10;                    &lt;Text style={styles.categoryIconText}&gt;{categoryInfo.icon}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Conteúdo do Card */}&#10;            &lt;View style={styles.cardContent}&gt;&#10;                &lt;Text style={styles.cardTitle} numberOfLines={2}&gt;{item.title}&lt;/Text&gt;&#10;&#10;                {/* Localização */}&#10;                &lt;View style={styles.locationRow}&gt;&#10;                    &lt;Text style={styles.locationIcon}&gt;&lt;/Text&gt;&#10;                    &lt;Text style={styles.cardLocation} numberOfLines={1}&gt;{item.location}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Preço em destaque */}&#10;                &lt;View style={styles.priceRow}&gt;&#10;                    &lt;View style={styles.priceContainer}&gt;&#10;                        &lt;Text style={styles.priceSymbol}&gt;€&lt;/Text&gt;&#10;                        &lt;Text style={styles.cardPrice}&gt;{parseFloat(item.price_per_day).toFixed(2)}&lt;/Text&gt;&#10;                        &lt;Text style={styles.priceLabel}&gt;/dia&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;&#10;                    {/* Botão de ação */}&#10;                    &lt;View style={styles.actionButton}&gt;&#10;                        &lt;Text style={styles.actionButtonText}&gt;Ver +&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Indicador visual de card interativo */}&#10;            &lt;View style={styles.cardShine} /&gt;&#10;        &lt;/TouchableOpacity&gt;&#10;    );&#10;};&#10;&#10;export default function MainMarketplace({ session, navigation, route }) {&#10;    const [items, setItems] = useState([]);&#10;    const [filteredItems, setFilteredItems] = useState([]);&#10;    const [loading, setLoading] = useState(true);&#10;    const [searchQuery, setSearchQuery] = useState('');&#10;    const [selectedCategory, setSelectedCategory] = useState('Todos');&#10;    const [sortBy, setSortBy] = useState('recent');&#10;    const [showCategories, setShowCategories] = useState(false);&#10;    const [showSort, setShowSort] = useState(false);&#10;    const [itemsToShow, setItemsToShow] = useState(6); // Mostrar apenas 6 itens inicialmente&#10;&#10;    const categories = [&#10;        'Todos',&#10;        'Eletrônicos',&#10;        'Esportes',&#10;        'Veículos',&#10;        'Móveis',&#10;        'Ferramentas',&#10;        'Festas',&#10;        'Jardim',&#10;        'Outros'&#10;    ];&#10;&#10;    const sortOptions = [&#10;        { id: 'recent', label: 'Mais Recentes', icon: '' },&#10;        { id: 'price_low', label: 'Menor Preço', icon: '' },&#10;        { id: 'price_high', label: 'Maior Preço', icon: '' },&#10;        { id: 'title', label: 'A-Z', icon: '' },&#10;    ];&#10;&#10;    async function fetchItems() {&#10;        setLoading(true);&#10;&#10;        const { data, error } = await supabase&#10;            .from('items')&#10;            .select('*')&#10;            .order('created_at', { ascending: false });&#10;&#10;        if (error) {&#10;            console.error(&quot;Erro ao buscar itens:&quot;, error.message);&#10;            setLoading(false);&#10;            return;&#10;        }&#10;&#10;        setItems(data || []);&#10;        setFilteredItems(data || []);&#10;        setLoading(false);&#10;    }&#10;&#10;    useEffect(() =&gt; {&#10;        fetchItems();&#10;&#10;        const unsubscribe = navigation.addListener('focus', () =&gt; {&#10;            fetchItems();&#10;        });&#10;        return unsubscribe;&#10;    }, [navigation]);&#10;&#10;    // Aplicar filtros&#10;    useEffect(() =&gt; {&#10;        let filtered = items;&#10;&#10;        // Filtro por categoria&#10;        if (selectedCategory !== 'Todos') {&#10;            filtered = filtered.filter(item =&gt; item.category === selectedCategory);&#10;        }&#10;&#10;        // Filtro por busca&#10;        if (searchQuery.trim()) {&#10;            filtered = filtered.filter(item =&gt;&#10;                item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||&#10;                item.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||&#10;                item.location.toLowerCase().includes(searchQuery.toLowerCase())&#10;            );&#10;        }&#10;&#10;        // Aplicar ordenação&#10;        const sorted = [...filtered].sort((a, b) =&gt; {&#10;            switch (sortBy) {&#10;                case 'price_low':&#10;                    return parseFloat(a.price_per_day) - parseFloat(b.price_per_day);&#10;                case 'price_high':&#10;                    return parseFloat(b.price_per_day) - parseFloat(a.price_per_day);&#10;                case 'title':&#10;                    return a.title.localeCompare(b.title);&#10;                case 'recent':&#10;                default:&#10;                    return new Date(b.created_at) - new Date(a.created_at);&#10;            }&#10;        });&#10;&#10;        setFilteredItems(sorted);&#10;    }, [searchQuery, selectedCategory, items, sortBy]);&#10;&#10;    // Verificar se há parâmetros de busca/categoria da HomeScreen&#10;    useEffect(() =&gt; {&#10;        if (route.params?.search) {&#10;            setSearchQuery(route.params.search);&#10;        }&#10;        if (route.params?.category) {&#10;            setSelectedCategory(route.params.category);&#10;        }&#10;    }, [route.params]);&#10;&#10;    const navigateToDetails = (item) =&gt; {&#10;        if (item.owner_id === session.user.id) {&#10;            navigation.navigate('EditItem', { item: item });&#10;        } else {&#10;            navigation.navigate('ItemDetails', { item: item });&#10;        }&#10;    };&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;View style={styles.loadingContent}&gt;&#10;                    &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#007bff&quot; /&gt;&#10;                    &lt;Text style={styles.loadingText}&gt;Carregando itens...&lt;/Text&gt;&#10;                    &lt;Text style={styles.loadingSubtext}&gt;Preparando o marketplace para você&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    return (&#10;        &lt;SafeAreaView style={styles.fullContainer}&gt;&#10;            {/* Header com Título e Botão Voltar */}&#10;            &lt;View style={styles.headerContainer}&gt;&#10;                &lt;View style={styles.headerTopRow}&gt;&#10;                    {/* Botão Voltar em Círculo */}&#10;                    &lt;TouchableOpacity&#10;                        style={styles.backButtonCircle}&#10;                        onPress={() =&gt; navigation.goBack()}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.backArrow}&gt;←&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {/* Título Marketplace */}&#10;                    &lt;Text style={styles.headerTitle}&gt;Marketplace&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Barra de Pesquisa */}&#10;                &lt;View style={styles.searchInputContainer}&gt;&#10;                    &lt;Text style={styles.searchIcon}&gt;&lt;/Text&gt;&#10;                    &lt;TextInput&#10;                        style={styles.searchInput}&#10;                        placeholder=&quot;Buscar por título, descrição ou local...&quot;&#10;                        placeholderTextColor=&quot;#999&quot;&#10;                        value={searchQuery}&#10;                        onChangeText={setSearchQuery}&#10;                    /&gt;&#10;                    {searchQuery !== '' &amp;&amp; (&#10;                        &lt;TouchableOpacity&#10;                            onPress={() =&gt; setSearchQuery('')}&#10;                            style={styles.clearButton}&#10;                        &gt;&#10;                            &lt;Text style={styles.clearIcon}&gt;✕&lt;/Text&gt;&#10;                        &lt;/TouchableOpacity&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;&#10;                {(searchQuery || selectedCategory !== 'Todos') &amp;&amp; (&#10;                    &lt;View style={styles.filterActiveBadge}&gt;&#10;                        &lt;Text style={styles.filterActiveBadgeText}&gt;Filtrado&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                )}&#10;            &lt;/View&gt;&#10;&#10;            {/* Filtros Compactos */}&#10;            &lt;View style={styles.compactFiltersRow}&gt;&#10;                {/* Categorias - Expansível */}&#10;                &lt;View style={styles.filterSection}&gt;&#10;                    &lt;TouchableOpacity&#10;                        style={styles.filterHeader}&#10;                        onPress={() =&gt; setShowCategories(!showCategories)}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.filterHeaderText}&gt;&#10;                             {selectedCategory === 'Todos' ? 'Categorias' : selectedCategory}&#10;                        &lt;/Text&gt;&#10;                        &lt;Text style={styles.filterHeaderArrow}&gt;{showCategories ? '▲' : '▼'}&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {showCategories &amp;&amp; (&#10;                        &lt;View style={styles.filterContent}&gt;&#10;                            {categories.map((category) =&gt; {&#10;                                const isActive = selectedCategory === category;&#10;                                const config = categoryConfig[category] || categoryConfig['Outros'];&#10;&#10;                                return (&#10;                                    &lt;TouchableOpacity&#10;                                        key={category}&#10;                                        style={[styles.filterOption, isActive &amp;&amp; styles.filterOptionActive]}&#10;                                        onPress={() =&gt; {&#10;                                            setSelectedCategory(category);&#10;                                            setShowCategories(false);&#10;                                        }}&#10;                                        activeOpacity={0.7}&#10;                                    &gt;&#10;                                        {category !== 'Todos' &amp;&amp; (&#10;                                            &lt;Text style={styles.filterOptionIcon}&gt;{config.icon}&lt;/Text&gt;&#10;                                        )}&#10;                                        &lt;Text style={[styles.filterOptionText, isActive &amp;&amp; styles.filterOptionTextActive]}&gt;&#10;                                            {category}&#10;                                        &lt;/Text&gt;&#10;                                        {isActive &amp;&amp; &lt;Text style={styles.filterOptionCheck}&gt;✓&lt;/Text&gt;}&#10;                                    &lt;/TouchableOpacity&gt;&#10;                                );&#10;                            })}&#10;                        &lt;/View&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;&#10;                {/* Ordenação - Expansível */}&#10;                &lt;View style={styles.filterSection}&gt;&#10;                    &lt;TouchableOpacity&#10;                        style={styles.filterHeader}&#10;                        onPress={() =&gt; setShowSort(!showSort)}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.filterHeaderText}&gt;&#10;                             {sortOptions.find(o =&gt; o.id === sortBy)?.label || 'Ordenar'}&#10;                        &lt;/Text&gt;&#10;                        &lt;Text style={styles.filterHeaderArrow}&gt;{showSort ? '▲' : '▼'}&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {showSort &amp;&amp; (&#10;                        &lt;View style={styles.filterContent}&gt;&#10;                            {sortOptions.map((option) =&gt; {&#10;                                const isActive = sortBy === option.id;&#10;&#10;                                return (&#10;                                    &lt;TouchableOpacity&#10;                                        key={option.id}&#10;                                        style={[styles.filterOption, isActive &amp;&amp; styles.filterOptionActive]}&#10;                                        onPress={() =&gt; {&#10;                                            setSortBy(option.id);&#10;                                            setShowSort(false);&#10;                                        }}&#10;                                        activeOpacity={0.7}&#10;                                    &gt;&#10;                                        &lt;Text style={styles.filterOptionIcon}&gt;{option.icon}&lt;/Text&gt;&#10;                                        &lt;Text style={[styles.filterOptionText, isActive &amp;&amp; styles.filterOptionTextActive]}&gt;&#10;                                            {option.label}&#10;                                        &lt;/Text&gt;&#10;                                        {isActive &amp;&amp; &lt;Text style={styles.filterOptionCheck}&gt;✓&lt;/Text&gt;}&#10;                                    &lt;/TouchableOpacity&gt;&#10;                                );&#10;                            })}&#10;                        &lt;/View&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Lista de Itens em Grid melhorado */}&#10;            &lt;FlatList&#10;                data={filteredItems.slice(0, itemsToShow)}&#10;                keyExtractor={(item) =&gt; item.id}&#10;                renderItem={({ item }) =&gt; (&#10;                    &lt;ItemCard item={item} onDetailsPress={navigateToDetails} /&gt;&#10;                )}&#10;                numColumns={2}&#10;                columnWrapperStyle={styles.row}&#10;                contentContainerStyle={styles.list}&#10;                ListFooterComponent={() =&gt; (&#10;                    itemsToShow &lt; filteredItems.length ? (&#10;                        &lt;TouchableOpacity&#10;                            style={styles.loadMoreButton}&#10;                            onPress={() =&gt; setItemsToShow(itemsToShow + 6)}&#10;                        &gt;&#10;                            &lt;Text style={styles.loadMoreText}&gt;Ver Mais ({filteredItems.length - itemsToShow} restantes)&lt;/Text&gt;&#10;                        &lt;/TouchableOpacity&gt;&#10;                    ) : null&#10;                )}&#10;                ListEmptyComponent={&#10;                    &lt;View style={styles.emptyContainer}&gt;&#10;                        &lt;View style={styles.emptyContent}&gt;&#10;                            &lt;Text style={styles.emptyIcon}&gt;&lt;/Text&gt;&#10;                            &lt;Text style={styles.emptyTitle}&gt;Nenhum item encontrado&lt;/Text&gt;&#10;                            &lt;Text style={styles.emptyText}&gt;&#10;                                {searchQuery || selectedCategory !== 'Todos'&#10;                                    ? 'Tente ajustar os filtros de busca'&#10;                                    : 'Seja o primeiro a anunciar um item!'}&#10;                            &lt;/Text&gt;&#10;                            {(searchQuery || selectedCategory !== 'Todos') &amp;&amp; (&#10;                                &lt;TouchableOpacity&#10;                                    style={styles.clearFiltersButton}&#10;                                    onPress={() =&gt; {&#10;                                        setSearchQuery('');&#10;                                        setSelectedCategory('Todos');&#10;                                    }}&#10;                                &gt;&#10;                                    &lt;Text style={styles.clearFiltersButtonText}&gt;Limpar Filtros&lt;/Text&gt;&#10;                                &lt;/TouchableOpacity&gt;&#10;                            )}&#10;                        &lt;/View&gt;&#10;                    &lt;/View&gt;&#10;                }&#10;                refreshing={loading}&#10;                onRefresh={fetchItems}&#10;            /&gt;&#10;&#10;            {/* Botão Flutuante melhorado */}&#10;            &lt;TouchableOpacity&#10;                style={styles.addButton}&#10;                onPress={() =&gt; navigation.navigate('AddItem')}&#10;                activeOpacity={0.9}&#10;            &gt;&#10;                &lt;View style={styles.addButtonInner}&gt;&#10;                    &lt;Text style={styles.addButtonText}&gt;+&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/TouchableOpacity&gt;&#10;        &lt;/SafeAreaView&gt;&#10;    );&#10;}&#10;&#10;const styles = StyleSheet.create({&#10;    fullContainer: {&#10;        flex: 1,&#10;        backgroundColor: '#F8F9FA',&#10;        paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,&#10;    },&#10;    loadingContainer: {&#10;        flex: 1,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        backgroundColor: '#F8F9FA',&#10;    },&#10;    loadingContent: {&#10;        alignItems: 'center',&#10;    },&#10;    loadingText: {&#10;        marginTop: 15,&#10;        fontSize: 18,&#10;        fontWeight: '600',&#10;        color: '#333',&#10;    },&#10;    loadingSubtext: {&#10;        marginTop: 5,&#10;        fontSize: 14,&#10;        color: '#999',&#10;    },&#10;    headerContainer: {&#10;        backgroundColor: '#fff',&#10;        paddingTop: 20,&#10;        paddingBottom: 15,&#10;        paddingHorizontal: 20,&#10;        borderBottomWidth: 1,&#10;        borderBottomColor: '#E8E8E8',&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.05,&#10;        shadowRadius: 3,&#10;    },&#10;    headerTopRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        justifyContent: 'space-between',&#10;    },&#10;    backButtonCircle: {&#10;        width: 40,&#10;        height: 40,&#10;        borderRadius: 20,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        backgroundColor: '#007bff',&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    backArrow: {&#10;        fontSize: 18,&#10;        color: '#fff',&#10;    },&#10;    headerTitle: {&#10;        fontSize: 18,&#10;        fontWeight: 'bold',&#10;        color: '#333',&#10;        flex: 1,&#10;        textAlign: 'center',&#10;    },&#10;    searchInputContainer: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: '#F8F9FA',&#10;        paddingHorizontal: 15,&#10;        borderRadius: 15,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;        marginTop: 10,&#10;    },&#10;    searchIcon: {&#10;        fontSize: 18,&#10;        marginRight: 10,&#10;    },&#10;    searchInput: {&#10;        flex: 1,&#10;        paddingVertical: 12,&#10;        fontSize: 15,&#10;        color: '#333',&#10;    },&#10;    clearButton: {&#10;        padding: 5,&#10;    },&#10;    clearIcon: {&#10;        fontSize: 18,&#10;        color: '#999',&#10;    },&#10;    compactFiltersRow: {&#10;        backgroundColor: '#fff',&#10;        borderBottomWidth: 1,&#10;        borderBottomColor: '#E8E8E8',&#10;        marginBottom: 10,&#10;        flexDirection: 'row',&#10;        gap: 10,&#10;        paddingHorizontal: 15,&#10;        paddingVertical: 12,&#10;    },&#10;    filterSection: {&#10;        flex: 1,&#10;        position: 'relative',&#10;    },&#10;    filterHeader: {&#10;        flexDirection: 'row',&#10;        justifyContent: 'space-between',&#10;        alignItems: 'center',&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 15,&#10;        backgroundColor: '#F8F9FA',&#10;        borderRadius: 10,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;    },&#10;    filterHeaderText: {&#10;        fontSize: 13,&#10;        fontWeight: '600',&#10;        color: '#333',&#10;        flex: 1,&#10;    },&#10;    filterHeaderArrow: {&#10;        fontSize: 14,&#10;        color: '#007bff',&#10;        marginLeft: 5,&#10;    },&#10;    filterContent: {&#10;        position: 'absolute',&#10;        top: 45,&#10;        left: 0,&#10;        right: 0,&#10;        zIndex: 1000,&#10;        backgroundColor: '#fff',&#10;        borderRadius: 10,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;        elevation: 5,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.15,&#10;        shadowRadius: 4,&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 10,&#10;        maxHeight: 250,&#10;    },&#10;    filterOption: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 15,&#10;        borderRadius: 10,&#10;        backgroundColor: '#F8F9FA',&#10;        marginBottom: 8,&#10;    },&#10;    filterOptionActive: {&#10;        backgroundColor: '#007bff',&#10;    },&#10;    filterOptionIcon: {&#10;        fontSize: 16,&#10;        marginRight: 8,&#10;        color: '#007bff',&#10;    },&#10;    filterOptionText: {&#10;        fontSize: 14,&#10;        color: '#333',&#10;        flex: 1,&#10;    },&#10;    filterOptionTextActive: {&#10;        color: '#fff',&#10;    },&#10;    filterOptionCheck: {&#10;        fontSize: 16,&#10;        color: '#fff',&#10;    },&#10;    list: {&#10;        padding: 10,&#10;        paddingBottom: 80,&#10;    },&#10;    row: {&#10;        justifyContent: 'space-between',&#10;        paddingHorizontal: 10,&#10;        marginBottom: 5,&#10;    },&#10;    card: {&#10;        width: '48%',&#10;        backgroundColor: '#fff',&#10;        borderRadius: 20,&#10;        marginBottom: 15,&#10;        overflow: 'hidden',&#10;        elevation: 4,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 3 },&#10;        shadowOpacity: 0.15,&#10;        shadowRadius: 5,&#10;    },&#10;    cardImageContainer: {&#10;        position: 'relative',&#10;        width: '100%',&#10;        height: 160,&#10;        backgroundColor: '#f0f0f0',&#10;    },&#10;    cardImage: {&#10;        width: '100%',&#10;        height: '100%',&#10;    },&#10;    cardImagePlaceholder: {&#10;        width: '100%',&#10;        height: '100%',&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    placeholderIcon: {&#10;        fontSize: 50,&#10;        opacity: 0.6,&#10;    },&#10;    imageOverlay: {&#10;        position: 'absolute',&#10;        bottom: 0,&#10;        left: 0,&#10;        right: 0,&#10;        height: 60,&#10;        backgroundColor: 'transparent',&#10;    },&#10;    availableBadge: {&#10;        position: 'absolute',&#10;        top: 10,&#10;        right: 10,&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: 'rgba(40, 167, 69, 0.95)',&#10;        paddingHorizontal: 10,&#10;        paddingVertical: 5,&#10;        borderRadius: 20,&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 1 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 2,&#10;    },&#10;    availableDot: {&#10;        width: 6,&#10;        height: 6,&#10;        borderRadius: 3,&#10;        backgroundColor: '#fff',&#10;        marginRight: 5,&#10;    },&#10;    availableBadgeText: {&#10;        color: '#fff',&#10;        fontSize: 11,&#10;        fontWeight: 'bold',&#10;    },&#10;    unavailableBadge: {&#10;        position: 'absolute',&#10;        top: 10,&#10;        right: 10,&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: 'rgba(220, 53, 69, 0.95)',&#10;        paddingHorizontal: 10,&#10;        paddingVertical: 5,&#10;        borderRadius: 20,&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 1 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 2,&#10;    },&#10;    unavailableDot: {&#10;        width: 6,&#10;        height: 6,&#10;        borderRadius: 3,&#10;        backgroundColor: '#fff',&#10;        marginRight: 5,&#10;    },&#10;    unavailableBadgeText: {&#10;        color: '#fff',&#10;        fontSize: 11,&#10;        fontWeight: 'bold',&#10;    },&#10;    categoryIconBadge: {&#10;        position: 'absolute',&#10;        bottom: 10,&#10;        left: 10,&#10;        width: 36,&#10;        height: 36,&#10;        borderRadius: 18,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        elevation: 3,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 3,&#10;    },&#10;    categoryIconText: {&#10;        fontSize: 20,&#10;    },&#10;    cardContent: {&#10;        padding: 14,&#10;    },&#10;    cardTitle: {&#10;        fontSize: 15,&#10;        fontWeight: 'bold',&#10;        color: '#1a3a52',&#10;        marginBottom: 8,&#10;        height: 40,&#10;        lineHeight: 20,&#10;    },&#10;    locationRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        marginBottom: 10,&#10;    },&#10;    locationIcon: {&#10;        fontSize: 12,&#10;        marginRight: 4,&#10;    },&#10;    cardLocation: {&#10;        fontSize: 12,&#10;        color: '#666',&#10;        flex: 1,&#10;        fontWeight: '500',&#10;    },&#10;    priceRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        justifyContent: 'space-between',&#10;        borderTopWidth: 1,&#10;        borderTopColor: '#F0F0F0',&#10;        paddingTop: 10,&#10;        marginTop: 5,&#10;    },&#10;    priceContainer: {&#10;        flexDirection: 'row',&#10;        alignItems: 'baseline',&#10;        flex: 1,&#10;    },&#10;    priceSymbol: {&#10;        fontSize: 14,&#10;        fontWeight: 'bold',&#10;        color: '#28a745',&#10;        marginRight: 2,&#10;    },&#10;    cardPrice: {&#10;        fontSize: 22,&#10;        fontWeight: 'bold',&#10;        color: '#28a745',&#10;    },&#10;    priceLabel: {&#10;        fontSize: 12,&#10;        color: '#666',&#10;        marginLeft: 3,&#10;        fontWeight: '500',&#10;    },&#10;    actionButton: {&#10;        backgroundColor: '#007bff',&#10;        paddingHorizontal: 12,&#10;        paddingVertical: 6,&#10;        borderRadius: 15,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    actionButtonText: {&#10;        color: '#fff',&#10;        fontSize: 12,&#10;        fontWeight: 'bold',&#10;    },&#10;    cardShine: {&#10;        position: 'absolute',&#10;        top: 0,&#10;        left: 0,&#10;        right: 0,&#10;        height: 2,&#10;        backgroundColor: 'rgba(255, 255, 255, 0.3)',&#10;    },&#10;    emptyContainer: {&#10;        flex: 1,&#10;        alignItems: 'center',&#10;        justifyContent: 'center',&#10;        paddingVertical: 80,&#10;    },&#10;    emptyContent: {&#10;        alignItems: 'center',&#10;        paddingHorizontal: 40,&#10;    },&#10;    emptyIcon: {&#10;        fontSize: 80,&#10;        marginBottom: 20,&#10;        opacity: 0.5,&#10;    },&#10;    emptyTitle: {&#10;        fontSize: 22,&#10;        fontWeight: 'bold',&#10;        color: '#333',&#10;        marginBottom: 10,&#10;    },&#10;    emptyText: {&#10;        fontSize: 15,&#10;        color: '#666',&#10;        textAlign: 'center',&#10;        lineHeight: 22,&#10;    },&#10;    clearFiltersButton: {&#10;        marginTop: 20,&#10;        backgroundColor: '#007bff',&#10;        paddingHorizontal: 24,&#10;        paddingVertical: 12,&#10;        borderRadius: 25,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    clearFiltersButtonText: {&#10;        color: '#fff',&#10;        fontSize: 15,&#10;        fontWeight: 'bold',&#10;    },&#10;    addButton: {&#10;        position: 'absolute',&#10;        right: 20,&#10;        bottom: 20,&#10;        width: 64,&#10;        height: 64,&#10;        borderRadius: 32,&#10;        elevation: 8,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 4 },&#10;        shadowOpacity: 0.4,&#10;        shadowRadius: 5,&#10;    },&#10;    addButtonInner: {&#10;        width: '100%',&#10;        height: '100%',&#10;        borderRadius: 32,&#10;        backgroundColor: '#007bff',&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    addButtonText: {&#10;        fontSize: 32,&#10;        color: '#fff',&#10;        fontWeight: '300',&#10;    },&#10;    loadMoreButton: {&#10;        backgroundColor: '#007bff',&#10;        paddingVertical: 12,&#10;        paddingHorizontal: 24,&#10;        borderRadius: 25,&#10;        alignItems: 'center',&#10;        justifyContent: 'center',&#10;        marginVertical: 10,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    loadMoreText: {&#10;        color: '#fff',&#10;        fontSize: 14,&#10;        fontWeight: 'bold',&#10;    },&#10;});&#10;" />
              <option name="updatedContent" value="import React, { useState, useEffect } from 'react';&#10;import { StyleSheet, View, Text, FlatList, ActivityIndicator, Image, TouchableOpacity, TextInput, ScrollView, Platform, StatusBar } from 'react-native';&#10;import { SafeAreaView } from 'react-native-safe-area-context';&#10;import { supabase } from '../../supabase';&#10;&#10;const SUPABASE_URL = 'https://fvhnkwxvxnsatqmljnxu.supabase.co';&#10;&#10;// Mapeamento de ícones e cores por categoria&#10;const categoryConfig = {&#10;    'Eletrônicos': { icon: '', color: '#FF6B6B', gradient: ['#FF6B6B', '#EE5A6F'] },&#10;    'Esportes': { icon: '', color: '#FF9F43', gradient: ['#FF9F43', '#FF8C00'] },&#10;    'Veículos': { icon: '', color: '#48DBFB', gradient: ['#48DBFB', '#0FB9E0'] },&#10;    'Móveis': { icon: '️', color: '#FFC312', gradient: ['#FFC312', '#EEA500'] },&#10;    'Ferramentas': { icon: '', color: '#A29BFE', gradient: ['#A29BFE', '#8B7FEE'] },&#10;    'Festas': { icon: '', color: '#FF6348', gradient: ['#FF6348', '#E84118'] },&#10;    'Jardim': { icon: '', color: '#26DE81', gradient: ['#26DE81', '#20BF6B'] },&#10;    'Outros': { icon: '', color: '#95A5A6', gradient: ['#95A5A6', '#7F8C8D'] },&#10;};&#10;&#10;// Componente para renderizar cada item em formato de card moderno&#10;const ItemCard = ({ item, onDetailsPress }) =&gt; {&#10;    const imageUrl = `${SUPABASE_URL}/storage/v1/object/public/item_photos/${item.photo_url}`;&#10;    const categoryInfo = categoryConfig[item.category] || categoryConfig['Outros'];&#10;&#10;    return (&#10;        &lt;TouchableOpacity&#10;            style={styles.card}&#10;            onPress={() =&gt; onDetailsPress(item)}&#10;            activeOpacity={0.9}&#10;        &gt;&#10;            {/* Imagem do Item com Overlay */}&#10;            &lt;View style={styles.cardImageContainer}&gt;&#10;                {item.photo_url ? (&#10;                    &lt;Image&#10;                        source={{ uri: imageUrl }}&#10;                        style={styles.cardImage}&#10;                        resizeMode=&quot;cover&quot;&#10;                    /&gt;&#10;                ) : (&#10;                    &lt;View style={[styles.cardImagePlaceholder, { backgroundColor: categoryInfo.color + '20' }]}&gt;&#10;                        &lt;Text style={styles.placeholderIcon}&gt;{categoryInfo.icon}&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                )}&#10;&#10;                {/* Gradiente Overlay na parte inferior da imagem */}&#10;                &lt;View style={styles.imageOverlay} /&gt;&#10;&#10;                {/* Badge de Disponibilidade */}&#10;                {item.is_available ? (&#10;                    &lt;View style={styles.availableBadge}&gt;&#10;                        &lt;View style={styles.availableDot} /&gt;&#10;                        &lt;Text style={styles.availableBadgeText}&gt;Disponível&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                ) : (&#10;                    &lt;View style={styles.unavailableBadge}&gt;&#10;                        &lt;View style={styles.unavailableDot} /&gt;&#10;                        &lt;Text style={styles.unavailableBadgeText}&gt;Alugado&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                )}&#10;&#10;                {/* Ícone de Categoria */}&#10;                &lt;View style={[styles.categoryIconBadge, { backgroundColor: categoryInfo.color }]}&gt;&#10;                    &lt;Text style={styles.categoryIconText}&gt;{categoryInfo.icon}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Conteúdo do Card */}&#10;            &lt;View style={styles.cardContent}&gt;&#10;                &lt;Text style={styles.cardTitle} numberOfLines={2}&gt;{item.title}&lt;/Text&gt;&#10;&#10;                {/* Localização */}&#10;                &lt;View style={styles.locationRow}&gt;&#10;                    &lt;Text style={styles.locationIcon}&gt;&lt;/Text&gt;&#10;                    &lt;Text style={styles.cardLocation} numberOfLines={1}&gt;{item.location}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Preço em destaque */}&#10;                &lt;View style={styles.priceRow}&gt;&#10;                    &lt;View style={styles.priceContainer}&gt;&#10;                        &lt;Text style={styles.priceSymbol}&gt;€&lt;/Text&gt;&#10;                        &lt;Text style={styles.cardPrice}&gt;{parseFloat(item.price_per_day).toFixed(2)}&lt;/Text&gt;&#10;                        &lt;Text style={styles.priceLabel}&gt;/dia&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;&#10;                    {/* Botão de ação */}&#10;                    &lt;View style={styles.actionButton}&gt;&#10;                        &lt;Text style={styles.actionButtonText}&gt;Ver +&lt;/Text&gt;&#10;                    &lt;/View&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Indicador visual de card interativo */}&#10;            &lt;View style={styles.cardShine} /&gt;&#10;        &lt;/TouchableOpacity&gt;&#10;    );&#10;};&#10;&#10;export default function MainMarketplace({ session, navigation, route }) {&#10;    const [items, setItems] = useState([]);&#10;    const [filteredItems, setFilteredItems] = useState([]);&#10;    const [loading, setLoading] = useState(true);&#10;    const [searchQuery, setSearchQuery] = useState('');&#10;    const [selectedCategory, setSelectedCategory] = useState('Todos');&#10;    const [sortBy, setSortBy] = useState('recent');&#10;    const [showCategories, setShowCategories] = useState(false);&#10;    const [showSort, setShowSort] = useState(false);&#10;    const [itemsToShow, setItemsToShow] = useState(6); // Mostrar apenas 6 itens inicialmente&#10;&#10;    const categories = [&#10;        'Todos',&#10;        'Eletrônicos',&#10;        'Esportes',&#10;        'Veículos',&#10;        'Móveis',&#10;        'Ferramentas',&#10;        'Festas',&#10;        'Jardim',&#10;        'Outros'&#10;    ];&#10;&#10;    const sortOptions = [&#10;        { id: 'recent', label: 'Mais Recentes', icon: '' },&#10;        { id: 'price_low', label: 'Menor Preço', icon: '' },&#10;        { id: 'price_high', label: 'Maior Preço', icon: '' },&#10;        { id: 'title', label: 'A-Z', icon: '' },&#10;    ];&#10;&#10;    async function fetchItems() {&#10;        setLoading(true);&#10;&#10;        const { data, error } = await supabase&#10;            .from('items')&#10;            .select('*')&#10;            .order('created_at', { ascending: false });&#10;&#10;        if (error) {&#10;            console.error(&quot;Erro ao buscar itens:&quot;, error.message);&#10;            setLoading(false);&#10;            return;&#10;        }&#10;&#10;        setItems(data || []);&#10;        setFilteredItems(data || []);&#10;        setLoading(false);&#10;    }&#10;&#10;    useEffect(() =&gt; {&#10;        fetchItems();&#10;&#10;        const unsubscribe = navigation.addListener('focus', () =&gt; {&#10;            fetchItems();&#10;        });&#10;        return unsubscribe;&#10;    }, [navigation]);&#10;&#10;    // Aplicar filtros&#10;    useEffect(() =&gt; {&#10;        let filtered = items;&#10;&#10;        // Filtro por categoria&#10;        if (selectedCategory !== 'Todos') {&#10;            filtered = filtered.filter(item =&gt; item.category === selectedCategory);&#10;        }&#10;&#10;        // Filtro por busca&#10;        if (searchQuery.trim()) {&#10;            filtered = filtered.filter(item =&gt;&#10;                item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||&#10;                item.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||&#10;                item.location.toLowerCase().includes(searchQuery.toLowerCase())&#10;            );&#10;        }&#10;&#10;        // Aplicar ordenação&#10;        const sorted = [...filtered].sort((a, b) =&gt; {&#10;            switch (sortBy) {&#10;                case 'price_low':&#10;                    return parseFloat(a.price_per_day) - parseFloat(b.price_per_day);&#10;                case 'price_high':&#10;                    return parseFloat(b.price_per_day) - parseFloat(a.price_per_day);&#10;                case 'title':&#10;                    return a.title.localeCompare(b.title);&#10;                case 'recent':&#10;                default:&#10;                    return new Date(b.created_at) - new Date(a.created_at);&#10;            }&#10;        });&#10;&#10;        setFilteredItems(sorted);&#10;    }, [searchQuery, selectedCategory, items, sortBy]);&#10;&#10;    // Verificar se há parâmetros de busca/categoria da HomeScreen&#10;    useEffect(() =&gt; {&#10;        if (route.params?.search) {&#10;            setSearchQuery(route.params.search);&#10;        }&#10;        if (route.params?.category) {&#10;            setSelectedCategory(route.params.category);&#10;        }&#10;    }, [route.params]);&#10;&#10;    const navigateToDetails = (item) =&gt; {&#10;        if (item.owner_id === session.user.id) {&#10;            navigation.navigate('EditItem', { item: item });&#10;        } else {&#10;            navigation.navigate('ItemDetails', { item: item });&#10;        }&#10;    };&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;View style={styles.loadingContent}&gt;&#10;                    &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#007bff&quot; /&gt;&#10;                    &lt;Text style={styles.loadingText}&gt;Carregando itens...&lt;/Text&gt;&#10;                    &lt;Text style={styles.loadingSubtext}&gt;Preparando o marketplace para você&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    return (&#10;        &lt;SafeAreaView style={styles.fullContainer}&gt;&#10;            {/* Header com Título e Botão Voltar */}&#10;            &lt;View style={styles.headerContainer}&gt;&#10;                &lt;View style={styles.headerTopRow}&gt;&#10;                    {/* Botão Voltar em Círculo */}&#10;                    &lt;TouchableOpacity&#10;                        style={styles.backButtonCircle}&#10;                        onPress={() =&gt; navigation.goBack()}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.backArrow}&gt;←&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {/* Título Marketplace */}&#10;                    &lt;Text style={styles.headerTitle}&gt;Marketplace&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Barra de Pesquisa */}&#10;                &lt;View style={styles.searchInputContainer}&gt;&#10;                    &lt;Text style={styles.searchIcon}&gt;&lt;/Text&gt;&#10;                    &lt;TextInput&#10;                        style={styles.searchInput}&#10;                        placeholder=&quot;Buscar por título, descrição ou local...&quot;&#10;                        placeholderTextColor=&quot;#999&quot;&#10;                        value={searchQuery}&#10;                        onChangeText={setSearchQuery}&#10;                    /&gt;&#10;                    {searchQuery !== '' &amp;&amp; (&#10;                        &lt;TouchableOpacity&#10;                            onPress={() =&gt; setSearchQuery('')}&#10;                            style={styles.clearButton}&#10;                        &gt;&#10;                            &lt;Text style={styles.clearIcon}&gt;✕&lt;/Text&gt;&#10;                        &lt;/TouchableOpacity&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Filtros Compactos */}&#10;            &lt;View style={styles.compactFiltersRow}&gt;&#10;                {/* Categorias - Expansível */}&#10;                &lt;View style={styles.filterSection}&gt;&#10;                    &lt;TouchableOpacity&#10;                        style={styles.filterHeader}&#10;                        onPress={() =&gt; setShowCategories(!showCategories)}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.filterHeaderText}&gt;&#10;                             {selectedCategory === 'Todos' ? 'Categorias' : selectedCategory}&#10;                        &lt;/Text&gt;&#10;                        &lt;Text style={styles.filterHeaderArrow}&gt;{showCategories ? '▲' : '▼'}&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {showCategories &amp;&amp; (&#10;                        &lt;View style={styles.filterContent}&gt;&#10;                            {categories.map((category) =&gt; {&#10;                                const isActive = selectedCategory === category;&#10;                                const config = categoryConfig[category] || categoryConfig['Outros'];&#10;&#10;                                return (&#10;                                    &lt;TouchableOpacity&#10;                                        key={category}&#10;                                        style={[styles.filterOption, isActive &amp;&amp; styles.filterOptionActive]}&#10;                                        onPress={() =&gt; {&#10;                                            setSelectedCategory(category);&#10;                                            setShowCategories(false);&#10;                                        }}&#10;                                        activeOpacity={0.7}&#10;                                    &gt;&#10;                                        {category !== 'Todos' &amp;&amp; (&#10;                                            &lt;Text style={styles.filterOptionIcon}&gt;{config.icon}&lt;/Text&gt;&#10;                                        )}&#10;                                        &lt;Text style={[styles.filterOptionText, isActive &amp;&amp; styles.filterOptionTextActive]}&gt;&#10;                                            {category}&#10;                                        &lt;/Text&gt;&#10;                                        {isActive &amp;&amp; &lt;Text style={styles.filterOptionCheck}&gt;✓&lt;/Text&gt;}&#10;                                    &lt;/TouchableOpacity&gt;&#10;                                );&#10;                            })}&#10;                        &lt;/View&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;&#10;                {/* Ordenação - Expansível */}&#10;                &lt;View style={styles.filterSection}&gt;&#10;                    &lt;TouchableOpacity&#10;                        style={styles.filterHeader}&#10;                        onPress={() =&gt; setShowSort(!showSort)}&#10;                        activeOpacity={0.7}&#10;                    &gt;&#10;                        &lt;Text style={styles.filterHeaderText}&gt;&#10;                             {sortOptions.find(o =&gt; o.id === sortBy)?.label || 'Ordenar'}&#10;                        &lt;/Text&gt;&#10;                        &lt;Text style={styles.filterHeaderArrow}&gt;{showSort ? '▲' : '▼'}&lt;/Text&gt;&#10;                    &lt;/TouchableOpacity&gt;&#10;&#10;                    {showSort &amp;&amp; (&#10;                        &lt;View style={styles.filterContent}&gt;&#10;                            {sortOptions.map((option) =&gt; {&#10;                                const isActive = sortBy === option.id;&#10;&#10;                                return (&#10;                                    &lt;TouchableOpacity&#10;                                        key={option.id}&#10;                                        style={[styles.filterOption, isActive &amp;&amp; styles.filterOptionActive]}&#10;                                        onPress={() =&gt; {&#10;                                            setSortBy(option.id);&#10;                                            setShowSort(false);&#10;                                        }}&#10;                                        activeOpacity={0.7}&#10;                                    &gt;&#10;                                        &lt;Text style={styles.filterOptionIcon}&gt;{option.icon}&lt;/Text&gt;&#10;                                        &lt;Text style={[styles.filterOptionText, isActive &amp;&amp; styles.filterOptionTextActive]}&gt;&#10;                                            {option.label}&#10;                                        &lt;/Text&gt;&#10;                                        {isActive &amp;&amp; &lt;Text style={styles.filterOptionCheck}&gt;✓&lt;/Text&gt;}&#10;                                    &lt;/TouchableOpacity&gt;&#10;                                );&#10;                            })}&#10;                        &lt;/View&gt;&#10;                    )}&#10;                &lt;/View&gt;&#10;            &lt;/View&gt;&#10;&#10;            {/* Lista de Itens em Grid melhorado */}&#10;            &lt;FlatList&#10;                data={filteredItems.slice(0, itemsToShow)}&#10;                keyExtractor={(item) =&gt; item.id}&#10;                renderItem={({ item }) =&gt; (&#10;                    &lt;ItemCard item={item} onDetailsPress={navigateToDetails} /&gt;&#10;                )}&#10;                numColumns={2}&#10;                columnWrapperStyle={styles.row}&#10;                contentContainerStyle={styles.list}&#10;                ListFooterComponent={() =&gt; (&#10;                    itemsToShow &lt; filteredItems.length ? (&#10;                        &lt;TouchableOpacity&#10;                            style={styles.loadMoreButton}&#10;                            onPress={() =&gt; setItemsToShow(itemsToShow + 6)}&#10;                        &gt;&#10;                            &lt;Text style={styles.loadMoreText}&gt;Ver Mais ({filteredItems.length - itemsToShow} restantes)&lt;/Text&gt;&#10;                        &lt;/TouchableOpacity&gt;&#10;                    ) : null&#10;                )}&#10;                ListEmptyComponent={&#10;                    &lt;View style={styles.emptyContainer}&gt;&#10;                        &lt;View style={styles.emptyContent}&gt;&#10;                            &lt;Text style={styles.emptyIcon}&gt;&lt;/Text&gt;&#10;                            &lt;Text style={styles.emptyTitle}&gt;Nenhum item encontrado&lt;/Text&gt;&#10;                            &lt;Text style={styles.emptyText}&gt;&#10;                                {searchQuery || selectedCategory !== 'Todos'&#10;                                    ? 'Tente ajustar os filtros de busca'&#10;                                    : 'Seja o primeiro a anunciar um item!'}&#10;                            &lt;/Text&gt;&#10;                            {(searchQuery || selectedCategory !== 'Todos') &amp;&amp; (&#10;                                &lt;TouchableOpacity&#10;                                    style={styles.clearFiltersButton}&#10;                                    onPress={() =&gt; {&#10;                                        setSearchQuery('');&#10;                                        setSelectedCategory('Todos');&#10;                                    }}&#10;                                &gt;&#10;                                    &lt;Text style={styles.clearFiltersButtonText}&gt;Limpar Filtros&lt;/Text&gt;&#10;                                &lt;/TouchableOpacity&gt;&#10;                            )}&#10;                        &lt;/View&gt;&#10;                    &lt;/View&gt;&#10;                }&#10;                refreshing={loading}&#10;                onRefresh={fetchItems}&#10;            /&gt;&#10;&#10;            {/* Botão Flutuante melhorado */}&#10;            &lt;TouchableOpacity&#10;                style={styles.addButton}&#10;                onPress={() =&gt; navigation.navigate('AddItem')}&#10;                activeOpacity={0.9}&#10;            &gt;&#10;                &lt;View style={styles.addButtonInner}&gt;&#10;                    &lt;Text style={styles.addButtonText}&gt;+&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;            &lt;/TouchableOpacity&gt;&#10;        &lt;/SafeAreaView&gt;&#10;    );&#10;}&#10;&#10;const styles = StyleSheet.create({&#10;    fullContainer: {&#10;        flex: 1,&#10;        backgroundColor: '#F8F9FA',&#10;        paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,&#10;    },&#10;    loadingContainer: {&#10;        flex: 1,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        backgroundColor: '#F8F9FA',&#10;    },&#10;    loadingContent: {&#10;        alignItems: 'center',&#10;    },&#10;    loadingText: {&#10;        marginTop: 15,&#10;        fontSize: 18,&#10;        fontWeight: '600',&#10;        color: '#333',&#10;    },&#10;    loadingSubtext: {&#10;        marginTop: 5,&#10;        fontSize: 14,&#10;        color: '#999',&#10;    },&#10;    headerContainer: {&#10;        backgroundColor: '#fff',&#10;        paddingTop: 20,&#10;        paddingBottom: 15,&#10;        paddingHorizontal: 20,&#10;        borderBottomWidth: 1,&#10;        borderBottomColor: '#E8E8E8',&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.05,&#10;        shadowRadius: 3,&#10;    },&#10;    headerTopRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        justifyContent: 'space-between',&#10;    },&#10;    backButtonCircle: {&#10;        width: 40,&#10;        height: 40,&#10;        borderRadius: 20,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        backgroundColor: '#007bff',&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    backArrow: {&#10;        fontSize: 18,&#10;        color: '#fff',&#10;    },&#10;    headerTitle: {&#10;        fontSize: 18,&#10;        fontWeight: 'bold',&#10;        color: '#333',&#10;        flex: 1,&#10;        textAlign: 'center',&#10;    },&#10;    searchInputContainer: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: '#F8F9FA',&#10;        paddingHorizontal: 15,&#10;        borderRadius: 15,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;        marginTop: 10,&#10;    },&#10;    searchIcon: {&#10;        fontSize: 18,&#10;        marginRight: 10,&#10;    },&#10;    searchInput: {&#10;        flex: 1,&#10;        paddingVertical: 12,&#10;        fontSize: 15,&#10;        color: '#333',&#10;    },&#10;    clearButton: {&#10;        padding: 5,&#10;    },&#10;    clearIcon: {&#10;        fontSize: 18,&#10;        color: '#999',&#10;    },&#10;    compactFiltersRow: {&#10;        backgroundColor: '#fff',&#10;        borderBottomWidth: 1,&#10;        borderBottomColor: '#E8E8E8',&#10;        marginBottom: 10,&#10;        flexDirection: 'row',&#10;        gap: 10,&#10;        paddingHorizontal: 15,&#10;        paddingVertical: 12,&#10;    },&#10;    filterSection: {&#10;        flex: 1,&#10;        position: 'relative',&#10;    },&#10;    filterHeader: {&#10;        flexDirection: 'row',&#10;        justifyContent: 'space-between',&#10;        alignItems: 'center',&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 15,&#10;        backgroundColor: '#F8F9FA',&#10;        borderRadius: 10,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;    },&#10;    filterHeaderText: {&#10;        fontSize: 13,&#10;        fontWeight: '600',&#10;        color: '#333',&#10;        flex: 1,&#10;    },&#10;    filterHeaderArrow: {&#10;        fontSize: 14,&#10;        color: '#007bff',&#10;        marginLeft: 5,&#10;    },&#10;    filterContent: {&#10;        position: 'absolute',&#10;        top: 45,&#10;        left: 0,&#10;        right: 0,&#10;        zIndex: 1000,&#10;        backgroundColor: '#fff',&#10;        borderRadius: 10,&#10;        borderWidth: 1,&#10;        borderColor: '#E8E8E8',&#10;        elevation: 5,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.15,&#10;        shadowRadius: 4,&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 10,&#10;        maxHeight: 250,&#10;    },&#10;    filterOption: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        paddingVertical: 10,&#10;        paddingHorizontal: 15,&#10;        borderRadius: 10,&#10;        backgroundColor: '#F8F9FA',&#10;        marginBottom: 8,&#10;    },&#10;    filterOptionActive: {&#10;        backgroundColor: '#007bff',&#10;    },&#10;    filterOptionIcon: {&#10;        fontSize: 16,&#10;        marginRight: 8,&#10;        color: '#007bff',&#10;    },&#10;    filterOptionText: {&#10;        fontSize: 14,&#10;        color: '#333',&#10;        flex: 1,&#10;    },&#10;    filterOptionTextActive: {&#10;        color: '#fff',&#10;    },&#10;    filterOptionCheck: {&#10;        fontSize: 16,&#10;        color: '#fff',&#10;    },&#10;    list: {&#10;        padding: 10,&#10;        paddingBottom: 80,&#10;    },&#10;    row: {&#10;        justifyContent: 'space-between',&#10;        paddingHorizontal: 10,&#10;        marginBottom: 5,&#10;    },&#10;    card: {&#10;        width: '48%',&#10;        backgroundColor: '#fff',&#10;        borderRadius: 20,&#10;        marginBottom: 15,&#10;        overflow: 'hidden',&#10;        elevation: 4,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 3 },&#10;        shadowOpacity: 0.15,&#10;        shadowRadius: 5,&#10;    },&#10;    cardImageContainer: {&#10;        position: 'relative',&#10;        width: '100%',&#10;        height: 160,&#10;        backgroundColor: '#f0f0f0',&#10;    },&#10;    cardImage: {&#10;        width: '100%',&#10;        height: '100%',&#10;    },&#10;    cardImagePlaceholder: {&#10;        width: '100%',&#10;        height: '100%',&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    placeholderIcon: {&#10;        fontSize: 50,&#10;        opacity: 0.6,&#10;    },&#10;    imageOverlay: {&#10;        position: 'absolute',&#10;        bottom: 0,&#10;        left: 0,&#10;        right: 0,&#10;        height: 60,&#10;        backgroundColor: 'transparent',&#10;    },&#10;    availableBadge: {&#10;        position: 'absolute',&#10;        top: 10,&#10;        right: 10,&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: 'rgba(40, 167, 69, 0.95)',&#10;        paddingHorizontal: 10,&#10;        paddingVertical: 5,&#10;        borderRadius: 20,&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 1 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 2,&#10;    },&#10;    availableDot: {&#10;        width: 6,&#10;        height: 6,&#10;        borderRadius: 3,&#10;        backgroundColor: '#fff',&#10;        marginRight: 5,&#10;    },&#10;    availableBadgeText: {&#10;        color: '#fff',&#10;        fontSize: 11,&#10;        fontWeight: 'bold',&#10;    },&#10;    unavailableBadge: {&#10;        position: 'absolute',&#10;        top: 10,&#10;        right: 10,&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        backgroundColor: 'rgba(220, 53, 69, 0.95)',&#10;        paddingHorizontal: 10,&#10;        paddingVertical: 5,&#10;        borderRadius: 20,&#10;        elevation: 2,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 1 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 2,&#10;    },&#10;    unavailableDot: {&#10;        width: 6,&#10;        height: 6,&#10;        borderRadius: 3,&#10;        backgroundColor: '#fff',&#10;        marginRight: 5,&#10;    },&#10;    unavailableBadgeText: {&#10;        color: '#fff',&#10;        fontSize: 11,&#10;        fontWeight: 'bold',&#10;    },&#10;    categoryIconBadge: {&#10;        position: 'absolute',&#10;        bottom: 10,&#10;        left: 10,&#10;        width: 36,&#10;        height: 36,&#10;        borderRadius: 18,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;        elevation: 3,&#10;        shadowColor: '#000',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.2,&#10;        shadowRadius: 3,&#10;    },&#10;    categoryIconText: {&#10;        fontSize: 20,&#10;    },&#10;    cardContent: {&#10;        padding: 14,&#10;    },&#10;    cardTitle: {&#10;        fontSize: 15,&#10;        fontWeight: 'bold',&#10;        color: '#1a3a52',&#10;        marginBottom: 8,&#10;        height: 40,&#10;        lineHeight: 20,&#10;    },&#10;    locationRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        marginBottom: 10,&#10;    },&#10;    locationIcon: {&#10;        fontSize: 12,&#10;        marginRight: 4,&#10;    },&#10;    cardLocation: {&#10;        fontSize: 12,&#10;        color: '#666',&#10;        flex: 1,&#10;        fontWeight: '500',&#10;    },&#10;    priceRow: {&#10;        flexDirection: 'row',&#10;        alignItems: 'center',&#10;        justifyContent: 'space-between',&#10;        borderTopWidth: 1,&#10;        borderTopColor: '#F0F0F0',&#10;        paddingTop: 10,&#10;        marginTop: 5,&#10;    },&#10;    priceContainer: {&#10;        flexDirection: 'row',&#10;        alignItems: 'baseline',&#10;        flex: 1,&#10;    },&#10;    priceSymbol: {&#10;        fontSize: 14,&#10;        fontWeight: 'bold',&#10;        color: '#28a745',&#10;        marginRight: 2,&#10;    },&#10;    cardPrice: {&#10;        fontSize: 22,&#10;        fontWeight: 'bold',&#10;        color: '#28a745',&#10;    },&#10;    priceLabel: {&#10;        fontSize: 12,&#10;        color: '#666',&#10;        marginLeft: 3,&#10;        fontWeight: '500',&#10;    },&#10;    actionButton: {&#10;        backgroundColor: '#007bff',&#10;        paddingHorizontal: 12,&#10;        paddingVertical: 6,&#10;        borderRadius: 15,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    actionButtonText: {&#10;        color: '#fff',&#10;        fontSize: 12,&#10;        fontWeight: 'bold',&#10;    },&#10;    cardShine: {&#10;        position: 'absolute',&#10;        top: 0,&#10;        left: 0,&#10;        right: 0,&#10;        height: 2,&#10;        backgroundColor: 'rgba(255, 255, 255, 0.3)',&#10;    },&#10;    emptyContainer: {&#10;        flex: 1,&#10;        alignItems: 'center',&#10;        justifyContent: 'center',&#10;        paddingVertical: 80,&#10;    },&#10;    emptyContent: {&#10;        alignItems: 'center',&#10;        paddingHorizontal: 40,&#10;    },&#10;    emptyIcon: {&#10;        fontSize: 80,&#10;        marginBottom: 20,&#10;        opacity: 0.5,&#10;    },&#10;    emptyTitle: {&#10;        fontSize: 22,&#10;        fontWeight: 'bold',&#10;        color: '#333',&#10;        marginBottom: 10,&#10;    },&#10;    emptyText: {&#10;        fontSize: 15,&#10;        color: '#666',&#10;        textAlign: 'center',&#10;        lineHeight: 22,&#10;    },&#10;    clearFiltersButton: {&#10;        marginTop: 20,&#10;        backgroundColor: '#007bff',&#10;        paddingHorizontal: 24,&#10;        paddingVertical: 12,&#10;        borderRadius: 25,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    clearFiltersButtonText: {&#10;        color: '#fff',&#10;        fontSize: 15,&#10;        fontWeight: 'bold',&#10;    },&#10;    addButton: {&#10;        position: 'absolute',&#10;        right: 20,&#10;        bottom: 20,&#10;        width: 64,&#10;        height: 64,&#10;        borderRadius: 32,&#10;        elevation: 8,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 4 },&#10;        shadowOpacity: 0.4,&#10;        shadowRadius: 5,&#10;    },&#10;    addButtonInner: {&#10;        width: '100%',&#10;        height: '100%',&#10;        borderRadius: 32,&#10;        backgroundColor: '#007bff',&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    addButtonText: {&#10;        fontSize: 32,&#10;        color: '#fff',&#10;        fontWeight: '300',&#10;    },&#10;    loadMoreButton: {&#10;        backgroundColor: '#007bff',&#10;        paddingVertical: 12,&#10;        paddingHorizontal: 24,&#10;        borderRadius: 25,&#10;        alignItems: 'center',&#10;        justifyContent: 'center',&#10;        marginVertical: 10,&#10;        elevation: 2,&#10;        shadowColor: '#007bff',&#10;        shadowOffset: { width: 0, height: 2 },&#10;        shadowOpacity: 0.3,&#10;        shadowRadius: 3,&#10;    },&#10;    loadMoreText: {&#10;        color: '#fff',&#10;        fontSize: 14,&#10;        fontWeight: 'bold',&#10;    },&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/screens/ProfileScreen.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/screens/ProfileScreen.js" />
              <option name="originalContent" value="import React, { useState, useEffect } from 'react';&#10;import { StyleSheet, View, Text, ScrollView, ActivityIndicator, SafeAreaView } from 'react-native';&#10;import { supabase } from '../../supabase';&#10;import { Rating } from 'react-native-ratings'; // Para exibir a média de estrelas&#10;&#10;export default function ProfileScreen({ session }) {&#10;    const [profile, setProfile] = useState(null);&#10;    const [loading, setLoading] = useState(true);&#10;    const userId = session.user.id; // O ID do usuário logado&#10;&#10;    useEffect(() =&gt; {&#10;        fetchProfile();&#10;    }, []);&#10;&#10;    // Função para buscar o perfil na tabela 'profiles'&#10;    async function fetchProfile() {&#10;        setLoading(true);&#10;        // Busca o perfil que corresponde ao ID do usuário logado&#10;        const { data, error } = await supabase&#10;            .from('profiles')&#10;            .select('username, full_name, created_at, rating_avg_locador, rating_avg_locatario')&#10;            .eq('id', userId)&#10;            .single(); // Espera apenas uma linha (o perfil do usuário)&#10;&#10;        if (error) {&#10;            console.error('Erro ao buscar perfil:', error.message);&#10;            setLoading(false);&#10;            return;&#10;        }&#10;&#10;        setProfile(data);&#10;        setLoading(false);&#10;    }&#10;&#10;    const formatDate = (dateString) =&gt; {&#10;        if (!dateString) return 'N/A';&#10;        const options = { year: 'numeric', month: 'long', day: 'numeric' };&#10;        return new Date(dateString).toLocaleDateString('pt-BR', options);&#10;    };&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#007bff&quot; /&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    if (!profile) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;Text&gt;Perfil não encontrado. Tente novamente.&lt;/Text&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    // Função auxiliar para exibir a avaliação (se houver)&#10;    const renderRating = (average) =&gt; {&#10;        // Converte o valor numérico para exibição (ex: 4.5)&#10;        const ratingValue = parseFloat(average || 0);&#10;&#10;        return (&#10;            &lt;View style={styles.ratingBox}&gt;&#10;                &lt;Text style={styles.ratingValue}&gt;{ratingValue.toFixed(1)}&lt;/Text&gt;&#10;                &lt;Rating&#10;                    type='star'&#10;                    ratingCount={5}&#10;                    imageSize={18}&#10;                    readonly&#10;                    startingValue={ratingValue}&#10;                    style={{ paddingHorizontal: 10 }}&#10;                /&gt;&#10;                &lt;Text style={styles.ratingLabel}&gt;Média de Estrelas&lt;/Text&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    };&#10;&#10;    return (&#10;        &lt;SafeAreaView style={styles.container}&gt;&#10;            &lt;ScrollView contentContainerStyle={styles.scrollContent}&gt;&#10;                &lt;Text style={styles.header}&gt;Meu Perfil&lt;/Text&gt;&#10;&#10;                &lt;View style={styles.infoCard}&gt;&#10;                    &lt;Text style={styles.name}&gt;{profile.full_name || profile.username}&lt;/Text&gt;&#10;                    &lt;Text style={styles.username}&gt;@{profile.username}&lt;/Text&gt;&#10;                    &lt;Text style={styles.memberSince}&gt;Membro desde: {formatDate(profile.created_at)}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* --- SEÇÃO DE AVALIAÇÕES --- */}&#10;                &lt;Text style={styles.sectionHeader}&gt;Minhas Avaliações&lt;/Text&gt;&#10;&#10;                &lt;View style={styles.ratingsContainer}&gt;&#10;                    &lt;View style={styles.ratingSection}&gt;&#10;                        &lt;Text style={styles.roleTitle}&gt;Como Locador (Dono do Item)&lt;/Text&gt;&#10;                        {renderRating(profile.rating_avg_locador)}&#10;                    &lt;/View&gt;&#10;&#10;                    &lt;View style={styles.ratingSection}&gt;&#10;                        &lt;Text style={styles.roleTitle}&gt;Como Locatário (Cliente)&lt;/Text&gt;&#10;                        {renderRating(profile.rating_avg_locatario)}&#10;                    &lt;/View&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Espaço para um futuro botão de edição ou listagem de itens */}&#10;&#10;            &lt;/ScrollView&gt;&#10;        &lt;/SafeAreaView&gt;&#10;    );&#10;}&#10;&#10;const styles = StyleSheet.create({&#10;    container: {&#10;        flex: 1,&#10;        backgroundColor: '#f4f4f4',&#10;    },&#10;    loadingContainer: {&#10;        flex: 1,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    scrollContent: {&#10;        padding: 20,&#10;    },&#10;    header: {&#10;        fontSize: 26,&#10;        fontWeight: 'bold',&#10;        textAlign: 'center',&#10;        marginBottom: 20,&#10;        color: '#333',&#10;    },&#10;    infoCard: {&#10;        backgroundColor: '#fff',&#10;        padding: 20,&#10;        borderRadius: 10,&#10;        marginBottom: 20,&#10;        alignItems: 'center',&#10;        elevation: 2,&#10;    },&#10;    name: {&#10;        fontSize: 22,&#10;        fontWeight: '700',&#10;        marginBottom: 5,&#10;    },&#10;    username: {&#10;        fontSize: 14,&#10;        color: '#6c757d',&#10;        marginBottom: 10,&#10;    },&#10;    memberSince: {&#10;        fontSize: 12,&#10;        color: '#aaa',&#10;    },&#10;    sectionHeader: {&#10;        fontSize: 20,&#10;        fontWeight: 'bold',&#10;        marginTop: 10,&#10;        marginBottom: 15,&#10;        color: '#333',&#10;    },&#10;    ratingsContainer: {&#10;        flexDirection: 'row',&#10;        justifyContent: 'space-between',&#10;    },&#10;    ratingSection: {&#10;        flex: 1,&#10;        backgroundColor: '#fff',&#10;        padding: 15,&#10;        borderRadius: 10,&#10;        marginHorizontal: 5,&#10;        alignItems: 'center',&#10;        elevation: 1,&#10;    },&#10;    roleTitle: {&#10;        fontSize: 14,&#10;        fontWeight: '600',&#10;        textAlign: 'center',&#10;        marginBottom: 8,&#10;    },&#10;    ratingBox: {&#10;        alignItems: 'center',&#10;    },&#10;    ratingValue: {&#10;        fontSize: 28,&#10;        fontWeight: 'bold',&#10;        color: '#007bff',&#10;    },&#10;    ratingLabel: {&#10;        fontSize: 12,&#10;        color: '#6c757d',&#10;        marginTop: 5,&#10;    }&#10;});" />
              <option name="updatedContent" value="import React, { useState, useEffect } from 'react';&#10;import { StyleSheet, View, Text, ScrollView, ActivityIndicator } from 'react-native';&#10;import { SafeAreaView } from 'react-native-safe-area-context';&#10;import { supabase } from '../../supabase';&#10;import { Rating } from 'react-native-ratings'; // Para exibir a média de estrelas&#10;&#10;export default function ProfileScreen({ session }) {&#10;    const [profile, setProfile] = useState(null);&#10;    const [loading, setLoading] = useState(true);&#10;    const userId = session.user.id; // O ID do usuário logado&#10;&#10;    useEffect(() =&gt; {&#10;        fetchProfile();&#10;    }, []);&#10;&#10;    // Função para buscar o perfil na tabela 'profiles'&#10;    async function fetchProfile() {&#10;        setLoading(true);&#10;        // Busca o perfil que corresponde ao ID do usuário logado&#10;        const { data, error } = await supabase&#10;            .from('profiles')&#10;            .select('username, full_name, created_at, rating_avg_locador, rating_avg_locatario')&#10;            .eq('id', userId)&#10;            .single(); // Espera apenas uma linha (o perfil do usuário)&#10;&#10;        if (error) {&#10;            console.error('Erro ao buscar perfil:', error.message);&#10;            setLoading(false);&#10;            return;&#10;        }&#10;&#10;        setProfile(data);&#10;        setLoading(false);&#10;    }&#10;&#10;    const formatDate = (dateString) =&gt; {&#10;        if (!dateString) return 'N/A';&#10;        const options = { year: 'numeric', month: 'long', day: 'numeric' };&#10;        return new Date(dateString).toLocaleDateString('pt-BR', options);&#10;    };&#10;&#10;    if (loading) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#007bff&quot; /&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    if (!profile) {&#10;        return (&#10;            &lt;View style={styles.loadingContainer}&gt;&#10;                &lt;Text&gt;Perfil não encontrado. Tente novamente.&lt;/Text&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    }&#10;&#10;    // Função auxiliar para exibir a avaliação (se houver)&#10;    const renderRating = (average) =&gt; {&#10;        // Converte o valor numérico para exibição (ex: 4.5)&#10;        const ratingValue = parseFloat(average || 0);&#10;&#10;        return (&#10;            &lt;View style={styles.ratingBox}&gt;&#10;                &lt;Text style={styles.ratingValue}&gt;{ratingValue.toFixed(1)}&lt;/Text&gt;&#10;                &lt;Rating&#10;                    type='star'&#10;                    ratingCount={5}&#10;                    imageSize={18}&#10;                    readonly&#10;                    startingValue={ratingValue}&#10;                    style={{ paddingHorizontal: 10 }}&#10;                /&gt;&#10;                &lt;Text style={styles.ratingLabel}&gt;Média de Estrelas&lt;/Text&gt;&#10;            &lt;/View&gt;&#10;        );&#10;    };&#10;&#10;    return (&#10;        &lt;SafeAreaView style={styles.container}&gt;&#10;            &lt;ScrollView contentContainerStyle={styles.scrollContent}&gt;&#10;                &lt;Text style={styles.header}&gt;Meu Perfil&lt;/Text&gt;&#10;&#10;                &lt;View style={styles.infoCard}&gt;&#10;                    &lt;Text style={styles.name}&gt;{profile.full_name || profile.username}&lt;/Text&gt;&#10;                    &lt;Text style={styles.username}&gt;@{profile.username}&lt;/Text&gt;&#10;                    &lt;Text style={styles.memberSince}&gt;Membro desde: {formatDate(profile.created_at)}&lt;/Text&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* --- SEÇÃO DE AVALIAÇÕES --- */}&#10;                &lt;Text style={styles.sectionHeader}&gt;Minhas Avaliações&lt;/Text&gt;&#10;&#10;                &lt;View style={styles.ratingsContainer}&gt;&#10;                    &lt;View style={styles.ratingSection}&gt;&#10;                        &lt;Text style={styles.roleTitle}&gt;Como Locador (Dono do Item)&lt;/Text&gt;&#10;                        {renderRating(profile.rating_avg_locador)}&#10;                    &lt;/View&gt;&#10;&#10;                    &lt;View style={styles.ratingSection}&gt;&#10;                        &lt;Text style={styles.roleTitle}&gt;Como Locatário (Cliente)&lt;/Text&gt;&#10;                        {renderRating(profile.rating_avg_locatario)}&#10;                    &lt;/View&gt;&#10;                &lt;/View&gt;&#10;&#10;                {/* Espaço para um futuro botão de edição ou listagem de itens */}&#10;&#10;            &lt;/ScrollView&gt;&#10;        &lt;/SafeAreaView&gt;&#10;    );&#10;}&#10;&#10;const styles = StyleSheet.create({&#10;    container: {&#10;        flex: 1,&#10;        backgroundColor: '#f4f4f4',&#10;    },&#10;    loadingContainer: {&#10;        flex: 1,&#10;        justifyContent: 'center',&#10;        alignItems: 'center',&#10;    },&#10;    scrollContent: {&#10;        padding: 20,&#10;    },&#10;    header: {&#10;        fontSize: 26,&#10;        fontWeight: 'bold',&#10;        textAlign: 'center',&#10;        marginBottom: 20,&#10;        color: '#333',&#10;    },&#10;    infoCard: {&#10;        backgroundColor: '#fff',&#10;        padding: 20,&#10;        borderRadius: 10,&#10;        marginBottom: 20,&#10;        alignItems: 'center',&#10;        elevation: 2,&#10;    },&#10;    name: {&#10;        fontSize: 22,&#10;        fontWeight: '700',&#10;        marginBottom: 5,&#10;    },&#10;    username: {&#10;        fontSize: 14,&#10;        color: '#6c757d',&#10;        marginBottom: 10,&#10;    },&#10;    memberSince: {&#10;        fontSize: 12,&#10;        color: '#aaa',&#10;    },&#10;    sectionHeader: {&#10;        fontSize: 20,&#10;        fontWeight: 'bold',&#10;        marginTop: 10,&#10;        marginBottom: 15,&#10;        color: '#333',&#10;    },&#10;    ratingsContainer: {&#10;        flexDirection: 'row',&#10;        justifyContent: 'space-between',&#10;    },&#10;    ratingSection: {&#10;        flex: 1,&#10;        backgroundColor: '#fff',&#10;        padding: 15,&#10;        borderRadius: 10,&#10;        marginHorizontal: 5,&#10;        alignItems: 'center',&#10;        elevation: 1,&#10;    },&#10;    roleTitle: {&#10;        fontSize: 14,&#10;        fontWeight: '600',&#10;        textAlign: 'center',&#10;        marginBottom: 8,&#10;    },&#10;    ratingBox: {&#10;        alignItems: 'center',&#10;    },&#10;    ratingValue: {&#10;        fontSize: 28,&#10;        fontWeight: 'bold',&#10;        color: '#007bff',&#10;    },&#10;    ratingLabel: {&#10;        fontSize: 12,&#10;        color: '#6c757d',&#10;        marginTop: 5,&#10;    }&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>